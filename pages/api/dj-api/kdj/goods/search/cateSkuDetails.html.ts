import type { NextApiRequest, NextApiResponse } from 'next'
import { mockData_test_dj } from "@dj/cateSkuDetails";

export default (req: NextApiRequest, res: NextApiResponse) => {
    const { page } = req.body
    const total_page = Math.max(0, 5 - page)

    // const list = Array.from({ length: 10 }, (t, idx) => ({}))
    const list = []

    // const data = mockData
    // const goodsList = data.goodsList;
    // goodsList[0].tdType = "2";
    // goodsList[0].tdLable = "24h发货";

    // goodsList.forEach((t, idx) => t.categoryId = idList[idx])
    let obj = JSON.parse(JSON.stringify(mockData))
    obj.obj.goodsList = obj.obj.goodsList.map((item, idx1) => {
        if (item.productName.includes('金龙鱼')) {
            // item.previewList = [{
            //     "activeCode": null,
            //     "activeDesc": null,
            //     "activeEndTime": null,
            //     "activeName": null,
            //     "activityStartTime": null,
            //     "deliveryDay": null,
            //     "deliveryMethod": null,
            //     "goodsDetSid": "131570",
            //     "goodsPreviewPrice": null,
            //     "ruletype": "19",
            //     "ruleName": "预售",
            //     "deliveryDate": null
            // }]
            // item.minBuyQuan = '233'
            // item.minBuySpec = 'TM'
        } else if (11 === idx1) {
            item.popinfosList = [
                ...item.popinfosList,
                ...item.popinfosList,
            ].map((item2, idx2) => {
                // item2.sLabel = `${idx2}${item2.sLabel}${item2.sLabel}`
                item2.sLabel = `到家全场`
                return item2
            })
        } else {
            // item.popinfosList = []
        }
        return item
    })
    return new Promise(function (resolve) {
        setTimeout(resolve.bind(null, resolve), 1000)
    }).then(() => {
        res.status(200).json(obj)
    })
}

const mockData = { "success": true, "resCode": "00100000", "obj": { "goodsList": [{ "id": "007780_2020007780ENT23234@@1@@66122", "basePrice": "79.00", "categoryId": "15658", "comSid": "2000", "goodsId": "66122", "goodsImage": "https://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000036193001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0036193001", "salePrice": "79.00", "searchSalePrice": "79.0", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "金龙鱼特香花生油", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "到家", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "15652": 1000, "16267": 1000, "15682": 6175, "16430": 1000, "15645": 1000, "15658": 1000 } }, { "id": "007780_2020007780ENT23234@@1@@1003456", "basePrice": "30.00", "categoryId": "15665", "comSid": "2000", "goodsId": "1003456", "goodsImage": "https://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000599495001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0599495001", "salePrice": "27.00", "searchSalePrice": "30.0", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "1002", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "隆力奇花露水 195ml隆力奇花露水 195ml隆力奇花露水 195ml隆力奇花露水 195ml隆力奇花露水 195ml隆力奇花露水 195ml隆力奇花露水 195ml隆力奇花露水 195ml隆力奇花", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "隆力奇", "popinfosList": [{ "rules": [{ "desc": "每第1件9.0折", "id": "8621" }, { "desc": "每第2件8.0折", "id": "8622" }], "activityType": "1", "memo": "到家的条件折扣1013", "labelDesc": "到家的条件折扣", "goodsDetSid": "1003456", "popDes": "折扣", "ruleid": "50979", "ruletype": "2", "ruleName": "折扣", "activityDesc": "到家条件折扣_165026034", "activityId": "52873", "shopid": "007780", "buyMember": "0", "sLabel": "到家的条件折扣", "mLabel": "到家的条件折扣1013" }], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "16344": 1000, "16432": 1000, "15809": 6739, "15665": 7 } }, { "id": "007780_2020007780ENT23234@@1@@79385", "basePrice": "10.00", "categoryId": "15665", "comSid": "2000", "goodsId": "79385", "goodsImage": "http://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000508251001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0508251001", "salePrice": "10.00", "searchSalePrice": "10.0", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "徐福记 鸡蛋沙琪玛 526g/袋", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "茶花", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "15662": 1000, "15809": 2642, "15665": 1000 } }, { "id": "007780_2020007780ENT23234@@1@@70704", "basePrice": "0.50", "categoryId": "15658", "comSid": "2000", "goodsId": "70704", "goodsImage": "http://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000189951001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0189951001", "salePrice": "0.50", "searchSalePrice": "0.5", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "越南进口 丰灵TIPO牛奶味面包干 152g", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "到家", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "15662": 1000, "15677": 1000, "16436": 5035, "16434": 1456, "15658": 1000 } }, { "id": "007780_2020007780ENT23234@@1@@72493", "basePrice": "8907.19", "categoryId": "15658", "comSid": "2000", "goodsId": "72493", "goodsImage": "http://img11.st.iblimg.com/goods-5/2017/02/42713_@1_@200X200.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0245518001", "salePrice": "8907.19", "searchSalePrice": "8907.19", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "马来西亚进口 福多巧克力瑞士卷 108g", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "福多", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 2, "minBuySpec": "件", "pageCat": { "12405": 1, "15662": 1000, "15677": 1000, "16436": 9018, "16434": 9449, "12412": 1000, "15658": 1000 } }, { "id": "007780_2020007780ENT23234@@1@@1003335", "basePrice": "32.00", "categoryId": "15665", "comSid": "2000", "goodsId": "1003335", "goodsImage": "https://Img.st.iblimg.com/fast2homemethod-2/offlinegoods/goods/SP_404692217_200x200.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0298077001", "salePrice": "32.00", "searchSalePrice": "32.0", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "瑞士莲可可黑巧克力茅台 100g", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "Lazza", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 3, "minBuySpec": "件", "pageCat": { "16432": 1000, "15665": 4 } }, { "id": "007780_2020007780ENT23234@@1@@166341", "basePrice": "14.50", "categoryId": "15653", "comSid": "2000", "goodsId": "166341", "goodsImage": "https://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000182897001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0182897001", "salePrice": "14.50", "searchSalePrice": "6.0", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "康师傅 经典袋五连包红烧排骨面 100g*5", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "康师傅", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "15662": 1000, "15809": 3077, "15653": 1 } }, { "id": "007780_2020007780ENT23234@@1@@131820", "basePrice": "4.00", "categoryId": "15665", "comSid": "2000", "goodsId": "131820", "goodsImage": "https://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000254708001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0254708001", "salePrice": "4.00", "searchSalePrice": "4.0", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "老母鸡&土鸡蛋团购套包【该团购套餐仅上海发货，其中青浦，嘉定，奉贤，崇明地区不发，请勿下单】老母鸡&土鸡蛋团购套包【该团购套餐仅上海发货，其中青浦，嘉定，", "pointTitle": "增强机体抵抗力，", "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "无品牌", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 5, "minBuySpec": "件", "pageCat": { "15662": 1000, "16432": 1000, "15809": 3, "15665": 3, "13612": 1000 } }, { "id": "007780_2020007780ENT23234@@1@@72959", "basePrice": "10.00", "categoryId": "15658", "comSid": "2000", "goodsId": "72959", "goodsImage": "http://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000266831001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0266831001", "salePrice": "10.00", "searchSalePrice": "10.0", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "娃哈哈 桂圆莲子营养八宝粥 360g*12", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "无品牌", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "15652": 1000, "15662": 1000, "16430": 1000, "15645": 1000, "15658": 1000 } }, { "id": "007780_2020007780ENT23234@@1@@162680", "basePrice": "8000.00", "categoryId": "15653", "comSid": "2000", "goodsId": "162680", "goodsImage": "https://Img.st.iblimg.com/fast2homemethod-2/offlinegoods/goods/SP_1861355871_200x200.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0809894001", "salePrice": "8000.00", "searchSalePrice": "8000.0", "plusPrice": "1111.00", "discountPrice": null, "endTime": null, "priceType": "35", "limitBuyPersonSum": null, "personLimit": "10", "saleStockStatus": "1", "limitPopSum": null, "productName": "乐事孜然爆羊排味薯片", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "乐事", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "15662": 1000, "15809": 2600, "15653": 6060 } }, { "id": "007780_2020007780ENT23234@@1@@76906", "basePrice": "10.00", "categoryId": "15658", "comSid": "2000", "goodsId": "76906", "goodsImage": "http://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000384467001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0384467001", "salePrice": "10.00", "searchSalePrice": "10.0", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "法国进口 玛茜佳酿波尔多AOC干红葡萄酒 750ml", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "到家", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "15677": 1000, "16436": 4087, "16434": 2162, "15658": 1000 } }, { "id": "007780_2020007780ENT23234@@1@@162590", "basePrice": "13.80", "categoryId": "15653", "comSid": "2000", "goodsId": "162590", "goodsImage": "https://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000881045001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0881045001", "salePrice": "13.80", "searchSalePrice": "13.8", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "34", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "德芙白巧克力(超值装) 100g", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "德芙", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "15651": 1, "15662": 1000, "15655": 1, "15653": 4036 } }, { "id": "007780_2020007780ENT23234@@1@@68463", "basePrice": "7.80", "categoryId": "15653", "comSid": "2000", "goodsId": "68463", "goodsImage": "https://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000124819001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0124819001", "salePrice": "7.80", "searchSalePrice": "7.8", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "TANG果珍清新甜橙味%&+固体饮料 750g", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "果珍", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 20, "minBuySpec": "件", "pageCat": { "16426": 1000, "15653": 1802, "16269": 1000, "16293": 1000 } }, { "id": "007780_2020007780ENT23234@@1@@162667", "basePrice": "10.00", "categoryId": "15665", "comSid": "2000", "goodsId": "162667", "goodsImage": "https://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000837405001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0837405001", "salePrice": "10.00", "searchSalePrice": "10.0", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "品客加州田园牧场风味薯片 110g", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "缓缓", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "15662": 1000, "15809": 6582, "15665": 1000 } }, { "id": "007780_2020007780ENT23234@@1@@67164", "basePrice": "3.10", "categoryId": "15665", "comSid": "2000", "goodsId": "67164", "goodsImage": "http://img.st.iblimg.com/goods-14/2000/2016/11/SP_2000_20000074207001_01_1006.jpg", "goodsType": null, "inStock": null, "comGoodCode": "0074207001", "salePrice": "3.10", "searchSalePrice": "3.1", "plusPrice": null, "discountPrice": null, "endTime": null, "priceType": "0", "limitBuyPersonSum": null, "personLimit": null, "saleStockStatus": "1", "limitPopSum": null, "productName": "三得利3.4度清爽听啤 330ml", "pointTitle": null, "saleStockSum": 11, "marketOn": "1", "type": null, "brandCnName": "到家", "popinfosList": [], "previewList": [], "xgList": [], "from": null, "tdType": "0", "tdLable": null, "mainTitle": null, "minBuyQuan": 0, "minBuySpec": "件", "pageCat": { "12405": 1000, "16268": 1000, "15662": 1000, "15809": 5500, "16430": 1000, "15665": 1000, "12412": 1000 } }] } }
