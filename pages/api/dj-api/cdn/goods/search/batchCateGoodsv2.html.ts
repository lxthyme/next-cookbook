import type { NextApiRequest, NextApiResponse } from 'next'

const API = (req: NextApiRequest, res: NextApiResponse) => {

  const { obj, ...obj_other } = mockData
  const emptyCateIds = [
    // ...t_盛夏美食.map(t => t.cateId),
    // '15671promotion',
    // '16425',
    '-1',
    // '16428',
    // '16429',
  ]
  const data = {
    ...obj_other,
    obj: [
      ...obj,
      ...t_盛夏美食,
      ...t_龙虾烧烤,
    ].map(t => {
      if(emptyCateIds.includes(t.cateId)) {
        t.docNos = []
      }
      return t
    })
  }

  return new Promise(function (resolve) {
    setTimeout(resolve.bind(null, resolve), 1000)
  })
    .then(() => {
      res.status(200).json(data)
    })
}

export default API

const mockData = {
	"success": true,
	"resCode": "00100000",
	"obj": []
}

const t_盛夏美食 = [{
  "docNos": ["2020_007780_2020007780ENT23234@@1@@65634", "2020_007780_2020007780ENT23234@@1@@65911", "2020_007780_2020007780ENT23234@@1@@66868", "2020_007780_2020007780ENT23234@@1@@68373", "2020_007780_2020007780ENT23234@@1@@68171"],
  "cateId": "15671promotion"
}, {
  "docNos": ["2020_007780_2020007780ENT23234@@1@@76517", "2020_007780_2020007780ENT23234@@1@@65634", "2040_200021_20402000211@@1@@3364211", "2040_200021_20402000211@@1@@3364209", "2040_200021_20402000211@@1@@3364207", "2040_200021_20402000211@@1@@66933", "2040_200021_20402000211@@1@@67632", "2020_007780_2020007780ENT23234@@1@@131534", "2020_007780_2020007780ENT23234@@1@@65715", "2020_007780_2020007780ENT23234@@1@@65911", "2020_007780_2020007780ENT23234@@1@@66011", "2020_007780_2020007780ENT23234@@1@@66013", "2020_007780_2020007780ENT23234@@1@@66076", "2020_007780_2020007780ENT23234@@1@@66868", "2020_007780_2020007780ENT23234@@1@@66946", "2020_007780_2020007780ENT23234@@1@@66956", "2020_007780_2020007780ENT23234@@1@@67104", "2020_007780_2020007780ENT23234@@1@@67167", "2020_007780_2020007780ENT23234@@1@@67215", "2020_007780_2020007780ENT23234@@1@@67356", "2020_007780_2020007780ENT23234@@1@@67469", "2020_007780_2020007780ENT23234@@1@@67592", "2020_007780_2020007780ENT23234@@1@@67874", "2020_007780_2020007780ENT23234@@1@@67960", "2020_007780_2020007780ENT23234@@1@@67972", "2020_007780_2020007780ENT23234@@1@@67974", "2020_007780_2020007780ENT23234@@1@@67990", "2020_007780_2020007780ENT23234@@1@@68043", "2020_007780_2020007780ENT23234@@1@@68059", "2020_007780_2020007780ENT23234@@1@@68120", "2020_007780_2020007780ENT23234@@1@@68371", "2020_007780_2020007780ENT23234@@1@@68373", "2020_007780_2020007780ENT23234@@1@@68572", "2020_007780_2020007780ENT23234@@1@@68575", "2020_007780_2020007780ENT23234@@1@@68581", "2020_007780_2020007780ENT23234@@1@@68582", "2020_007780_2020007780ENT23234@@1@@68585", "2020_007780_2020007780ENT23234@@1@@70223", "2020_007780_2020007780ENT23234@@1@@75706", "2020_007780_2020007780ENT23234@@1@@81420", "2020_007780_2020007780ENT23234@@1@@88462", "2020_007780_2020007780ENT23234@@1@@67340"],
  "cateId": "16424"
}, {
  "docNos": ["2020_007780_2020007780ENT23234@@1@@68130", "2020_007780_2020007780ENT23234@@1@@68271", "2020_007780_2020007780ENT23234@@1@@68171"],
  "cateId": "16425"
}, {
  "docNos": ["2020_007780_2020007780ENT23234@@1@@67812"],
  "cateId": "16427"
}, {
  "docNos": ["2020_007780_2020007780ENT23234@@1@@67444", "2020_007780_2020007780ENT23234@@1@@68915"],
  "cateId": "16430"
}]

const t_龙虾烧烤 = [{
  "docNos": ["2040_200021_20402000211@@1@@67632", "2020_007780_2020007780ENT23234@@1@@66011", "2020_007780_2020007780ENT23234@@1@@66868", "2020_007780_2020007780ENT23234@@1@@68043", "2020_007780_2020007780ENT23234@@1@@68271"],
  "cateId": "-1"
}, {
  "docNos": ["2040_200021_20402000211@@1@@67632", "2020_007780_2020007780ENT23234@@1@@66868"],
  "cateId": "16428"
}, {
  "docNos": ["2020_007780_2020007780ENT23234@@1@@66011", "2020_007780_2020007780ENT23234@@1@@68043", "2020_007780_2020007780ENT23234@@1@@68271"],
  "cateId": "16429"
}]
